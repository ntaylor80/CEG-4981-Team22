import cv2
import numpy as np
from PIL import Image
from io import BytesIO
import base64
from math import sqrt


base64_str = "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"
# BGR [low] [high] values OpenCV reverses color order
boundaries = [
    ([173, 63, 0], [255, 179, 135]),  # Blue mask lower/upper
    ([0, 69, 200], [0, 147, 255])  # Orange mask Lower/Upper
]



def analyze_image(image):


    pil_img = Image.open(BytesIO(base64.b64decode(image))).convert('RGB')

    img = cv2.cvtColor(np.array(pil_img), cv2.COLOR_RGB2GRAY)

    img_color = cv2.cvtColor(np.array(pil_img), cv2.COLOR_RGB2BGR)
    countStars(img)

    result = list()
    for (lower, upper) in boundaries:
        # create NumPy arrays from the boundaries
        lower = np.array(lower, dtype="uint8")
        upper = np.array(upper, dtype="uint8")

        # find the colors within the specified boundaries and apply
        # the mask
        mask = cv2.inRange(img_color, lower, upper)
        cv2.imwrite("mask.png",mask)
        result.append(countStars(mask))

    return result


def countStars(image):
    ret, thresh = cv2.threshold(image, 127, 255, 0)
    img, contours, hierarchy = cv2.findContours(thresh, 1, 2)

    starCount = 0
    divMaxSize = 0.175
    divMinSize = 0.125
    for contour in contours:

        cnt = contour
        area = cv2.contourArea(cnt)
        arcLen = cv2.arcLength(cnt, True)
        prop = sqrt(area) / arcLen
        if (prop < divMaxSize and prop > divMinSize):
            # print("I'm a star")
            starCount += 1

    print(starCount)
    return starCount
